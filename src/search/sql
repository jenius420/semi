CREATE OR REPLACE VIEW TOTALINFO
AS
SELECT I.WNUM AS "WNUM", I.WTITLE AS "WTITLE",R.ROADNAME AS "ROADNAME",R.ROADMAIN AS "ROADMAIN",R.ROADSUB AS "ROADSUB",G.DISTRICTNAME  AS "DISTRICTNAME", J.TYPENAME  AS "TYPENAME",J.CATEGORYNAME  AS "CATEGORYNAME", PO.SAVENAME  AS "SAVENAME",
PO.VALIDPHOTO AS "PVALID", I.WORKDAY AS "WORKDAY", I.WORKTIME AS "WORKTIME", I.WORKGENDER AS "WORKGENDER",I.WORKAGE AS "WORKAGE", I.WORKEDU  AS "WORKEDU", I.STARTDATE AS "STARTDATE", I.ENDDATE AS "ENDDATE",
I.INCRUITSTATUS AS "ISTATUS", I.WORKFORM AS "WORKFORM", I.SALARY AS "SALARY", I.APPLYPRODUCT AS "APPLYPRODUCT", I.REXPLAIN AS "REXPLAIN", I.PEOPLECOUNT AS "PEOPLECOUNT", O.OPNAME AS "OPNAME", O.OPADDRESS AS "OPADDRESS",O.ONAME AS "ONAME", O.OTEL AS "OTEL",O.PHONE AS "OPHONE",
O.EMAIL AS "EMAIL",
I.WTITLE||R.ROADNAME||D.DONGNUM||G.DISTRICTNAME||J.TYPENAME||J.CATEGORYNAME||I.WORKDAY||I.WORKTIME||I.WORKGENDER||I.WORKAGE||I.WORKEDU||I.WORKFORM||I.REXPLAIN||O.OPNAME||T.TERMNAME||T.TERMBIGNAME AS "TOTALINFO",
T.TERMNAME, T.TERMBIGNAME, I.ONUM AS "ONUM"
FROM INCRUITMEMBER I
JOIN OWNERINFO O ON(I.ONUM=O.ONUM)
JOIN ROADINFO R ON(O.ROADNUM=R.ROADNUM)
JOIN DONG D ON(R.DONGNUM=D.DONGNUM)
JOIN DISTRICT G ON (R.DISTRICTNUM=G.DISTRICTNUM)
JOIN WORKTERM T ON(I.TERMNO=T.TERMNO)
JOIN JOBTYPE J ON(O.TYPENUM=J.TYPENUM)
JOIN PHOTO PO ON(O.ONUM=PO.ONUM)
WHERE O.ROADNUM IS NOT NULL
UNION
SELECT I.WNUM AS "WNUM", I.WTITLE AS "WTITLE",D.DONGNAME AS "DONGNAME",D.DONGMAIN AS "DONGMAIN",D.DONGSUB AS "DONGSUB",G.DISTRICTNAME  AS "DISTRICTNAME", J.TYPENAME  AS "TYPENAME",J.CATEGORYNAME  AS "CATEGORYNAME", PO.SAVENAME  AS "SAVENAME",
PO.VALIDPHOTO AS "PVALID", I.WORKDAY AS "WORKDAY", I.WORKTIME AS "WORKTIME", I.WORKGENDER AS "WORKGENDER",I.WORKAGE AS "WORKAGE", I.WORKEDU  AS "WORKEDU", I.STARTDATE AS "STARTDATE", I.ENDDATE AS "ENDDATE",
I.INCRUITSTATUS AS "ISTATUS", I.WORKFORM AS "WORKFORM", I.SALARY AS "SALARY", I.APPLYPRODUCT AS "APPLYPRODUCT", I.REXPLAIN AS "REXPLAIN", I.PEOPLECOUNT AS "PEOPLECOUNT", O.OPNAME AS "OPNAME", O.OPADDRESS AS "OPADDRESS",O.ONAME AS "ONAME", O.OTEL AS "OTEL",O.PHONE AS "OPHONE",
O.EMAIL AS "EMAIL",
I.WTITLE||D.DONGNAME||G.DISTRICTNAME||J.TYPENAME||J.CATEGORYNAME||I.WORKDAY||I.WORKTIME||I.WORKGENDER||I.WORKAGE||I.WORKEDU||I.WORKFORM||I.REXPLAIN||O.OPNAME||T.TERMNAME||T.TERMBIGNAME AS "TOTALINFO",
T.TERMNAME, T.TERMBIGNAME, I.ONUM AS "ONUM"
FROM INCRUITMEMBER I
JOIN OWNERINFO O ON(I.ONUM=O.ONUM)
JOIN DONG D ON(O.DONGNUM=D.DONGNUM)
JOIN DISTRICT G ON (D.DISTRICTNUM=G.DISTRICTNUM)
JOIN WORKTERM T ON(I.TERMNO=T.TERMNO)
JOIN JOBTYPE J ON(O.TYPENUM=J.TYPENUM)
JOIN PHOTO PO ON(O.ONUM=PO.ONUM)
WHERE O.DONGNUM IS NOT NULL;

INSERT INTO PRODUCT(PTITLE,PEXPLAIN,PPAY) VALUES ('프리미엄','프리미엄알바노출','1000');
UPDATE INCRUITMEMBER SET APPLYPRODUCT=(SELECT PCODE FROM PRODUCT WHERE PTITLE='프리미엄') WHERE WNUM<40;
COMMIT;